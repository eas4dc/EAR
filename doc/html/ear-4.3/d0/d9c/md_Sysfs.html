<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EAR: Sysfs Report Plugin</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">EAR<span id="projectnumber">&#160;4.3</span>
   </div>
   <div id="projectbrief">Reference Manual</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d0/d9c/md_Sysfs.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Sysfs Report Plugin </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a new report plugin to write EAR collected data into a file. Single file is generated per metric per jobID &amp; stepID per node per island per cluster. Only the last collected data metrices are stored into the files, means every time the report runs it saves the current collected values by overwriting the pervious data.</p>
<h1><a class="anchor" id="autotoc_md108"></a>
Namespace Format</h1>
<p>The below schema has been followed to create the metric files: </p><div class="fragment"><div class="line"> {/root_directory/cluster/island/nodename/avg/metricFile}</div>
<div class="line">/root_directory/cluster/island/nodename/current/metricFile</div>
<div class="line">/root_directory/cluster/island/jobs/jobID/stepID/nodename/avg/metricFile</div>
<div class="line">/root_directory/cluster/island/jobs/jobID/stepID/nodename/current/metricFile </div>
</div><!-- fragment --><p> The root_directory is the default path where all the created metric files are generated.</p>
<p>The cluster, island and nodename will be replaced by the island number, cluster name, and node information.</p>
<p><code>metricFile</code> will be replaced by the name of the metrics collected by EAR.</p>
<h1><a class="anchor" id="autotoc_md109"></a>
Metric File Naming Format</h1>
<p>The naming format used to create the metric files is implementing the standard sysfs interface format. The current commonly used schema of file naming is:</p>
<p><code>&lt;type&gt;_&lt;component&gt;_&lt;metric-name&gt;_&lt;unit&gt;</code></p>
<p>Numbering is used with some metric files if the component has more than one instance like FLOPS counters or GPU data.</p>
<p>Examples of some generated metric files:</p><ul>
<li>dc_power_watt</li>
<li>app_sig_pck_power_watt</li>
<li>app_sig_mem_gbs</li>
<li>app_sig_flops_6</li>
<li>avg_imc_freq_KHz</li>
</ul>
<h1><a class="anchor" id="autotoc_md110"></a>
Metrics reported</h1>
<p>The following are the reported values for each type of metric recorded by ear:</p><ul>
<li>report_periodic_metrics<ul>
<li>Average values<ul>
<li>The frequency and temperature values have been calculated by summing the values of all periods since the report loaded until the current period and divide it by the total number of periods.</li>
<li>The energy value is accumulated value of all the periods since the report loaded until the current one.</li>
<li>The path to those metric files built as: /root_directory/cluster/island/nodename/avg/metricFile</li>
</ul>
</li>
<li>Current values<ul>
<li>Represent the current collected EAR metric per period.</li>
<li>The path to those metric files built as: /root_directory/cluster/island/nodename/current/metricFile</li>
</ul>
</li>
</ul>
</li>
<li>report_loops<ul>
<li>Current values<ul>
<li>Represent the current collected EAR metric per loop.</li>
<li>The path to those metric files built as: /root_directory/cluster/island/jobs/jobID/stepID/nodename/current/metricFile</li>
</ul>
</li>
</ul>
</li>
<li>report_applications<ul>
<li>Current values<ul>
<li>Represent the current collected EAR metric per application.</li>
<li>The path to those metric files built as: /root_directory/cluster/island/jobs/jobID/stepID/nodename/avg/metricFile</li>
</ul>
</li>
</ul>
</li>
<li>report_events<ul>
<li>Current values<ul>
<li>Represent the current collected EAR metric pere event.</li>
<li>The path to those metric files built as: /root_directory/cluster/island/jobs/jobID/stepID/nodename/current/metricFile</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>``` Note: If the cluster contains GPUs, both report_loops and report_applications will generate new schema files will per GPU which contain all the collected data for each GPU with the paths below: ◦ /root_directory/cluster/island/jobs/jobID/stepID/nodename/current/GPU-ID/metricFile ◦ /root_directory/cluster/island/jobs/jobID/stepID/nodename/avg/GPU-ID/metricFile </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
