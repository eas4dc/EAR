<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EAR: EAR Node Manager</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">EAR<span id="projectnumber">&#160;4.3</span>
   </div>
   <div id="projectbrief">Reference Manual</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d5/d80/md_EARD.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">EAR Node Manager </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md64">Overview</a></li>
<li class="level1"><a href="#autotoc_md65">Requirements</a></li>
<li class="level1"><a href="#autotoc_md66">Configuration</a></li>
<li class="level1"><a href="#autotoc_md67">Execution</a></li>
<li class="level1"><a href="#autotoc_md68">Reconfiguration</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md64"></a>
Overview</h1>
<p>The node daemon is the component in charge of providing any kind of services that requires privileged capabilities. Current version is conceived as an external process executed with root privileges.</p>
<p>The EARD provides the following services, each one covered by one thread:</p><ul>
<li>Provides privileged metrics to EARL such as the average frequency, uncore integrated memory controller counters to compute the memory bandwidth, as well as energy metrics (DC node, DRAM and package energy).</li>
<li>Implements a periodic power monitoring service. This service allows EAR package to control the total energy consumed in the system.</li>
<li>Offers a remote API used by EARplug, EARGM and EAR commands. This API accepts requests such as get the system status, change policy settings or notify new job/end job events.</li>
</ul>
<h1><a class="anchor" id="autotoc_md65"></a>
Requirements</h1>
<p>When executed in production environments, EARD connects with <a class="el" href="../../da/d20/md_EARDBD.html">EARDBD</a> service, that has to be up before starting the node daemon, otherwise values reported by EARD to be stored in the database, will be lost.</p>
<h1><a class="anchor" id="autotoc_md66"></a>
Configuration</h1>
<p>The EAR Daemon uses the <code>$(EAR_ETC)/ear/ear.conf</code> file to be configured. It can be dynamically configured by reloading the service.</p>
<p>Please visit the <a class="el" href="../../d2/d00/md_Configuration.html#eard-configuration">EAR configuration file page</a> for more information about the options of EARD and other components.</p>
<h1><a class="anchor" id="autotoc_md67"></a>
Execution</h1>
<p>To execute this component, these <code>systemctl</code> command examples are provided:</p><ul>
<li><code>sudo systemctl start eard</code> to start the EARD service.</li>
<li><code>sudo systemctl stop eard</code> to stop the EARD service.</li>
<li><code>sudo systemctl reload eard</code> to force reloading the configuration of the EARD service.</li>
</ul>
<p>Log messages are generated during the execution. Use <code>journalctl</code> command to see eard message:</p>
<ul>
<li><code>sudo journalctl -u eard -f</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md68"></a>
Reconfiguration</h1>
<p>After executing a <code>systemctl reload eard</code> command, not all the EARD options will be dynamically updated. The list of updated variables are:</p>
<div class="fragment"><div class="line">DefaultPstates</div>
<div class="line">NodeDaemonMaxPstate</div>
<div class="line">NodeDaemonVerbose</div>
<div class="line">NodeDaemonPowermonFreq</div>
<div class="line">SupportedPolicies</div>
<div class="line">MinTimePerformanceAccuracy</div>
</div><!-- fragment --><p>To reconfigure other options such as EARD connection port, coefficients, etc., it must be stopped and restarted again. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
