<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EAR: EAR-database-table-descriptions</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EAR
   &#160;<span id="projectnumber">4.2.1</span>
   </div>
   <div id="projectbrief">EAR Reference Manual</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">EAR-database-table-descriptions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>EAR's database contains several tables, as described <a href="../../EAR%20Database#tables">here</a>. Each table contains different information, as described here:</p>
<ul>
<li><span>id: Job id given by the scheduler (for example SLURM_JOBID).</span></li>
<li><span>step_id: step id given by the scheduler.</span></li>
<li>user_id: the linux username that executed the job.</li>
<li>app_id: the application/job name as given by the scheduler (not necessarily the executable’s name)</li>
<li>start_time: timestamp of the job’s[.step] start</li>
<li>end_time: timestamp of the job’s[.step] end</li>
<li>start_mpi_time: timestamp of the beginning of application region managed by the EARL. Named MPI for historical reasons. For MPI applications timestamp of the MPI_Init execution.</li>
<li>end_mpi_time: timestamp of the end of application region managed by the EARL. Named MPI for historical reasons. For MPI applications timestamp of the MPI_Finalize execution.</li>
<li>policy: EAR policy name in action for the job. Can be “No Policy” if the job runs without EAR.</li>
<li>threshold: threshold used by the policy to configure it’s behavior. For example, the maximum performance penalty in min_energy.</li>
<li>job_type:</li>
<li>def_f: default CPU frequency requested by the user/job manager.</li>
<li>user_acc: the account the user_id belongs to.</li>
<li>user_group: the linux group name the user_id belongs to.</li>
<li>e_tag: energy tag. The user can specify an energy tag to apply pre-defined CPU frequency settings.</li>
</ul>
<ul>
<li>job_id: job id given by the scheduler. Used as a foreign key for Jobs.</li>
<li>step_id: step id given by the scheduler. Used as a foreign key for Jobs.</li>
<li>node_id: the nodename in which the application ran. The names of the nodes are trimmed at any “.”, i.e., node1.at.cluster becomes node1.</li>
<li>signature_id: the id (index) of the computed signature for the job on this node. If the job runs without EAR library the field will be NULL.</li>
<li>power_signature_id: the id (index) of the power signature for the job on this node.</li>
</ul>
<p><em>All the metrics in this table refer to the period of time where the Signature is computed. Typically is 10 sec. Signatures are only reported when the application uses the EAR library.</em></p>
<ul>
<li>id: unique id generated by the database engine to be used in JOIN queries.</li>
<li>DC_power: average DC node power (in Watts)</li>
<li>DRAM_power: average DRAM power, including the 2 sockets (in Watts)</li>
<li>PCK_power: Average CPU power, including the 2 sockets (in Watts)</li>
<li>EDP: Energy Delay Product computed as (time x time x DC_power)</li>
<li>GBS: Main memory bandwidth (GB/sec)</li>
<li>TPI: Main memory transactions per instruction</li>
<li>CPI: Cycles per instructions.</li>
<li>Gflops: Giga Floating point operations, per second, generated by the application processes in the node. GFlops/sec.</li>
<li>time: total execution time (in seconds)</li>
<li>perc_MPI: average percentage of MPI time vs computational time in the node. Includes all the application processes in the node.</li>
<li>FLOPS1: Floating point operations Single precision 64 bits consumed by application processes in the node.</li>
<li>FLOPS2: Floating point operations Single precision 128 bits consumed by application processes in the node.</li>
<li>FLOPS3 Floating point operations Single precision 256 bits consumed by application processes in the node.</li>
<li>FLOPS4: Floating point operations Single precision 512 bits consumed by application processes in the node.</li>
<li>FLOPS5: Floating point operations Double precision 64 bits consumed by application processes in the node.</li>
<li>FLOPS6: Floating point operations Double precision 128 bits consumed by application processes in the node.</li>
<li>FLOPS7: Floating point operations Double precision 256 bits consumed by application processes in the node.</li>
<li>FLOPS8: Floating point operations Double precision 512 bits consumed by application processes in the node.</li>
<li>instructions: total instructions executed by the application processes in the node</li>
<li>cycles: total cycles consumed by the application processes in the node</li>
<li>avg_f: average CPU frequency (includes all the cores used by the application on the node) in KHz</li>
<li>avg_imc_f: average memory frequency (includes the two sockets) in KHz</li>
<li>def_f: default CPU frequency used at the beginning of the application in KHz</li>
<li>min_GPU_sig_id: start of the range containing the GPU_signature’s ids, used for JOIN queries. If an application doesn’t have GPUs it will be NULL</li>
<li>max_GPU_sig_id: end of the range containing the GPU_signature’s ids, used for JOIN queries. If an application doesn’t have GPUs it will be NULL</li>
</ul>
<blockquote class="doxtable">
<ol type="1">
<li>Each signature corresponds to either a Loop or an Application. When it’s an application it is the average values for its entire runtime. For a loop, the values are the average of only the period comprised by the loop’s start and end.</li>
<li>Signatures are only reported when an application is running with EARL.</li>
<li>The GPU signature values are inclusive, i.e. if a signature has a min_id = 1 and max_id = 3, the GPU_signatures with ids 1,2,3 will be from this application. </li>
</ol>
</blockquote>
<p><em>Power signatures are measured and reported by the EARD and reported for all the jobs/steps/nodes. It’s independent of the EAR library utilization.</em></p>
<ul>
<li>id: unique id generated by the database engine to be used in JOIN queries.</li>
<li>DC_power: average DC node power (in Watts)</li>
<li>DRAM_power: average DRAM power, including the 2 sockets (in Watts)</li>
<li>PCK_power: Average CPU power, including the 2 sockets (in Watts)</li>
<li>EDP: Energy Delay Product computed as (time x time x DC_power)</li>
<li>max_DC_power: maximum DC node power registered by the EAR daemon during the application’s execution (in Watts)</li>
<li>min_DC_power: minimum DC node power registered by the EAR daemon during the application’s execution (in Watts)</li>
<li>time: total execution time (in seconds)</li>
<li>avg_f: average CPU frequency (includes all the cores of the node) in KHz</li>
<li>def_f: default CPU frequency used at the beginning of the application in KHz</li>
</ul>
<ul>
<li>id: unique id generated by the database engine to be used in JOIN queries.</li>
<li>GPU_power: average GPU power for a single GPU (in Watts)</li>
<li>GPU_freq: average GPU frequency for a single GPU (in KHz)</li>
<li>GPU_mem_freq: average GPU memory frequency for a single GPU (in KHz)</li>
<li>GPU_util: average GPU utilisation for the reported period for a single GPU. (percentage)</li>
<li>GPU_mem_util: average GPU memory utilisation for the reported period for a single GPU.(percentage)</li>
</ul>
<blockquote class="doxtable">
<p>If an application has more than 1 GPU there will be a signature for each of them. </p>
</blockquote>
<p><em>Loops are only reported when the EAR library is used.</em></p>
<ul>
<li>event: loop type identificatory. It’s for internal use of the EAR library. Together with size and level is used internally.</li>
<li>size: loop’s size as computed by DynAIS.</li>
<li>level: loop’s level of depth (indicative of loops inside of loops)</li>
<li>job_id: job id given by the job manager. Used as a foreign key for Jobs.</li>
<li>step_id: step id given by the job manager. Used as a foreign key for Jobs.</li>
<li>node_id: the nodema,e in which the application ran. The names of the nodes are trimmed at any “.”, i.e., node1.at.cluster becomes node1.</li>
<li>total_iterations: timestamp at which the loop signature has been reported. It is named total_iterations for historical reasons.</li>
<li>signature_id: the id of the computed signature for the job on this node.</li>
</ul>
<blockquote class="doxtable">
<ol type="1">
<li>the combination even-size-level forms the Primary Key for the table loops.</li>
<li>Loops will always have a signature because they are only reported when EAR is used</li>
<li>When a loop is inserted, the corresponding Job is probably not in the database yet, because Jobs are inserted only when an application finishes. JOIN queries with Jobs can only be done once an application has finished (only the current step id needs to finish, not the entire job). </li>
</ol>
</blockquote>
<ul>
<li>id: unique id generated by the database engine to use as primary key.</li>
<li>timestamp: registered timestamp of when the event happened (NOT when it was inserted)</li>
<li>event_type: a numerical id for the type of EAR event</li>
<li>job_id: job id given by the job manager. Used as a foreign key for Jobs.</li>
<li>step_id: step id given by the job manager. Used as a foreign key for Jobs.</li>
<li>value: value for the event. The units and semantic depend on the type of event. node_id: the node in which the application ran. The names of the nodes are trimmed at any “.”, i.e., node1.at.cluster becomes node1.</li>
</ul>
<blockquote class="doxtable">
<p>The origins of an event are indicated by its cardinality:</p>
<ol type="1">
<li>EARL events’ type is always &lt; 100</li>
<li>EARD init events’ type is always &gt;=100 &lt;=200</li>
<li>EARD runtime events’ type is always &gt;=300 and &lt;=400</li>
<li>EARD powercap events’ type is always &gt;=500 and &lt;=600</li>
<li>EARGM events’ type is always &gt;=600 and &lt;=700 </li>
</ol>
</blockquote>
<blockquote class="doxtable">
<p>Certain events do not require a value, so it is set to 0 by default on those cases. </p>
</blockquote>
<p><em>This table is used by the EARGM.</em></p>
<ul>
<li>energy_percent: percentage of consumed energy from the current budget.</li>
<li>warning_level: current level of closeness to the current energy budget. Higher level means closer to the current budget.</li>
<li>time: timestamp of the energy event</li>
<li>inc_th: threshold increment sent to the EARDs to be applied to policies</li>
<li>p_state: p_state variation sent to the EARDs</li>
<li>GlobEnergyConsumedT1: current energy consumed within the last period T1</li>
<li>GlobEnergyConsumedT2: current energy consumed within the last period T2</li>
<li>GlobEnergyLimit: current energy budget/limit</li>
<li>GlobEnergyPeriodT1: duration of the current period T1</li>
<li>GlobEnergyPeriodT2: duration of the current period T2</li>
<li>GlobEnergyPolicy: current energy policy used by the EARGM</li>
</ul>
<blockquote class="doxtable">
<p>The warning level also indicates which inc_th and p_states are being sent to the EARDs </p>
</blockquote>
<ul>
<li>id: unique id generated by the database engine to use as primary key.</li>
<li>start_time: timestamp of the start of the period</li>
<li>end_time: timestamp of the end of the period</li>
<li>DC_energy: total energy consumed by the node during the period in Joules</li>
<li>node_id: the nodename in which the application period was registered. The names of the nodes are trimmed at any “.”, i.e., node1.at.cluster becomes node1.</li>
<li>job_id: job id given by the scheduler. Used as a foreign key for Jobs. If no job is running in the node during the period it will be 0.</li>
<li>step_id: step id given by the scheduler. Used as a foreign key for Jobs. If no job is running in the node during the period it will be 0.</li>
<li>avg_f: average CPU frequency (includes all the cores of the node) in Khz during the period.</li>
<li>temp: average temperature reported by the node during the period.</li>
<li>DRAM_energy: total energy consumed by the DRAM (includes 2 sockets) during the period, in Joules</li>
<li>PCK_energy: total energy consumed by the CPU (includes 2 sockets) during the period, in Joules</li>
<li>GPU_energy: total energy consumed by the GPU (includes all GPUs) during the period, in Joules</li>
</ul>
<ul>
<li>id: unique id generated by the database engine to use as primary key</li>
<li>start_time: timestamp of the start of the period</li>
<li>end_time: timestamp of the end of the period</li>
<li>DC_energy: accumulated energy consumed by the period</li>
<li>eardbd_host: hostname of the eardbd reporting the data to database. The hostnames of the nodes are trimmed at any “.”, i.e., service1.at.cluster becomes service1. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
