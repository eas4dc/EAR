<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EAR: Database installation</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EAR
   &#160;<span id="projectnumber">4.2.1</span>
   </div>
   <div id="projectbrief">EAR Reference Manual</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Database installation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ol type="1">
<li>Compile and install EAR with the database option enabled.</li>
<li>Modify the $ETC_EAR/ear/ear.conf file to specify in the database section the IP of the MySQL server as well as the user, user password (optional) and database port. Make sure that the said user (which may or may not have been created with the ear_create_database command) has the proper permissions towards the database created (only INSERT and SELECT privileges are needed) as well as permission to access the database from foreign IPs (such as the ones from the computation nodes). Said privileges should be granted at database creation, but some MySQL configurations may interfere and privileges will have to be granted manually by the admin.</li>
<li>Run the command $EAR_INSTALL_PATH/sbin/ear_create_database, which will create the database and user with the configuration previously specified in the ear.conf file. MySQL's root user needs permission to log from the location in which the command is being executed (if it's being executed locally nothing needs to be done). If the root user has a password, use the <em>-p</em> option which will ask the user to introduce it.</li>
<li>Start either the EAR daemon, the slurm controller and daemon with the EAR plugin or the <em>eard</em> service.</li>
<li>Run the jobs. The data should be successfully stored when a job is completed.</li>
</ol>
<h1><a class="anchor" id="autotoc_md1"></a>
Database information</h1>
<p>The main tables in the database Report and each of their rows are: </p><pre class="fragment">- Applications:  Contains basic information about where the application was executed (node_id) and the id's of the executed job and the final computated application signature.

- Jobs:  Contains the information about a job execution [user_id, app_id,start_time, end_time], as well as the EAR parameters defined executon (policy, threshold) and node information (procs, def_f). 

- Signatures: Contains the information of an application signature computed and used by EAR.

- Loops: Contains the information of an application loop, its identifying characteristics (type of event, size, level and total iterations), the job it belongs to and the computed signature of
the loop.

- Power_signatures: Contains power metrics of an application.

- Periodic_metrics: Contains information about a node's energy consumption with the purpose of monitoring it.

- Periodic_aggregations: Contains the same information as Periodic_metrics but aggregated by periods of time, not of each node individually.

- Learning_[tables]: The tables that begin with the "Learning_" prefix contain the same as their counterparts without prefix, but are used exclusively for the learning phase of the EAR library.
</pre><p>-The relationship between the tables can be seen in the adjunct diagram, as well as the general equivalent of their MySQL types.</p>
<p>Other tables are:</p><ul>
<li>Events: Contains a registry of EAR events (change in frequency, DynAIS on/off, etc.).</li>
<li>Warnings: Contains a registry of EAR's Global Manager warnings. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
