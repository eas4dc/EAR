.\" Manpage for ear_create_database.
.TH man 8 "August 2024" "5.0" "ear_create_database man page"
.SH NAME
edb_create \- Creates EAR's databases.
.SH SYNOPSIS
edb_create
.SH DESCRIPTION
edb_creade creates the base database, tables and users necessary for EAR's database functionality to work properly. In the current version, ear_create_database must be executed from somewhere where the "root" user of the MySQL/PostgreSQL server the given IP points to has access, if not a permission error will be thrown.

Currently, edb_create generates the database defined in ear.conf and the users for the EAR daemons and EAR commands. The first will be used to insert metrics into database by the EAR services, while the latter will be used by the user-facing commands to retrieve stored data. 
The database contains the following tables:
    -Applications:  Contains basic information about where the application was executed (node_id) and the id's of the executed job and the final computated application signature.
    -Jobs:  Contains the information about a job execution [user_id, app_id, start_time, end_time], as well as the EAR parameters defined at executon (policy, threshold) and node information (procs, def_f). 
    -Signatures:    Contains the information of an MPI application signature computed and used by EAR.
    -Loops:    Contains the information of an application loop, its identifying characteristics (type of event, size, level and total <iterations), the job it belongs to and the computed signature of the loop.
    -Power_signatures: Contains power metrics of an application.
	-GPU_signatures: Contains the GPU metrics of an application.
    -Events: Contains events registered by EAR, such as a change of frequency.
	-Global_energy: Contains the status registered by EARGM 

    -Periodic_metrics: Contains information about a node's energy consumption with the purpose of monitoring it.
    -Learning_[]: The databases that begin with the "Learning_" prefix contain the same as their counterparts without prefix, but are used exclusively for the learning phase of the EAR library.

By default, the user for the EAR services created by the command will only have INSERT and SELECT permissions and only in the default tables, while the user for EAR commands will only have SELECT privileges.

.SH OPTIONS
The supported options for edb_create are:
    -p      A password prompt will appear for the admin to introduce root's MySQL password.
    -e		Specify ear.conf file location. [default: $EAR_ETC/ear/ear.conf].
    -o		Outputs the queries that would run.
    -r		Runs the the queries and creates the database.
    -v		Shows current EAR version.
    -h		Shows help message.

.SH SEE ALSO
ereport, eacct
.SH BUGS
No known bugs.
.SH AUTHOR
EAR suport team (ear-support@bsc.es)
